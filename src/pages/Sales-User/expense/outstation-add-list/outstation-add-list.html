<!--
  Generated template for the OutstationAddListPage page.
  
  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header class="catalogue-header">
  
  <ion-navbar>
    <ion-title>Outstation Expense Summary</ion-title>
  </ion-navbar>
  
</ion-header>

<ion-content>
  
  <div class="padding16">
    
    
    <form id="outstationSummaryStart" >
      <ul class="collapsible mb4">
        
        <li >
          <div class="collapsible-header">Travel Entitlement - ₹ {{expenseTypeFinalTotalArr['Travel Entitlement']}}</div>
          <div class="collapsible-body p0">
            
            <div class="list">
              <div *ngFor="let row of expenseCartObj['Travel Entitlement']" class="box complete">
                <div class="heading">
                  <div class="order-content">
                    <p class="grey-clr">BUS/RAIL/AIR FARE</p>
                    <p class="font11 black-clr">Ticket number <span class="pending-clr"> #{{row.ticketNo}}</span></p>
                  </div>
                  
                  <div class="wp100 dflex">
                    <h1 class="lineh38">₹ {{row.amount}}</h1>
                  </div>
                </div>
                
                <div class="description pt6">
                  <div class="content-flex center-align">
                    <a class="cust-name">{{row.modeOfTravelName}} /{{row.class}}</a>
                    <!-- <p class="type">Allow</p> -->
                  </div>
                </div>
                
                <div class="figure-outer mb6 mt16">
                  <span class="top-sticky-head">Departure</span>
                  <div class="figure-innear dflex white-bg">
                    <div class="cs-figure">
                      <p>Date</p>
                      <p class="black-clr">{{row.departureDate | date: 'dd MMM yyyy'}}</p>
                    </div>
                    <div class="cs-figure border-left">
                      <p>Station</p>
                      <p class="black-clr">{{row.departureStation}}</p>
                    </div>
                    <div class="cs-figure border-left">
                      <p>Time</p>
                      <p class="black-clr">{{row.departureTime}}</p>
                    </div>
                  </div>
                </div> 
                <div class="figure-outer mb6 mt16">
                  <span class="top-sticky-head">Arrival</span>
                  <div class="figure-innear dflex white-bg">
                    <div class="cs-figure">
                      <p>Date</p>
                      <p class="black-clr">{{row.arrivalDate | date: 'dd MMM yyyy'}}</p>
                    </div>
                    <div class="cs-figure border-left">
                      <p>Station</p>
                      <p class="black-clr">{{row.arrivalStation}}</p>
                    </div>
                    <div class="cs-figure border-left">
                      <p>Time</p>
                      <p class="black-clr">{{row.arrivalTime}}</p>
                    </div>
                  </div>
                </div> 
              </div>
              
            </div>
          </div>
        </li>
        
        <li>
          <div class="collapsible-header">Hotel - ₹ {{expenseTypeFinalTotalArr['Hotel']}}</div>
          <div class="collapsible-body p0">
            
            
            
            
            <div class="list">
              <div *ngFor="let row of expenseCartObj['Hotel']" class="box complete">
                <div class="heading">
                  <div class="order-content">
                    <p style="font-weight: 600;">{{row.city}}</p>
                  </div>
                  
                  <div class="wp100 dflex">
                    <h1 class="lineh38">₹ {{row.billAmount}}</h1>
                  </div>
                </div>
                
                <div class="description pt6">
                  <div class="content-flex center-align">
                    <a class="cust-name">{{row.hotelName}}</a>
                    <!-- <p class="type">Allow</p> -->
                  </div>
                </div>
                <div class="cs-list mt16">
                  <div class="list-data flat-item">
                    <div class="figure padding0">
                      <ul>
                        <li>
                          <span>Check In date</span>
                          <p>{{row.checkInDate | date: 'dd MMM yyyy'}}</p>
                        </li>
                        <li>
                          <span>Check Out Date</span>
                          <p>{{row.checkOutDate | date: 'dd MMM yyyy'}}</p>
                        </li>
                        <li>
                          <span>Food Exp.</span>
                          <p>&#x20B9; {{row.foodExpense}}</p>
                        </li>
                        <li>
                          <span>Av-Aids Exp.</span>
                          <p >&#x20B9; {{row['avAidsExpense'] ? row['avAidsExpense'] : 0}}</p>
                        </li>
                        
                      </ul>
                      <ul *ngIf="row.remarks">
                        <li class="wp100" style="margin-top: -1px !important;">
                          <span>Remark</span>
                          <p style="white-space: normal;">{{row.remarks}}</p>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
                
              </div>
            </div>
          </div>
        </li> 
        
        <li *ngIf="expenseCartObj['Food'] && expenseCartObj['Food'].length>0"> 
          <div class="collapsible-header">Food - ₹ {{expenseTypeFinalTotalArr['Food']}}</div>
          <div class="collapsible-body p0">
            
            <div class="list">
              <div *ngFor="let row of expenseCartObj['Food']" class="box complete">
                <div class="heading">
                  
                  <div class="order-content">
                    <p class="grey-clr">{{row.date | date: 'dd MMM yyyy'}}</p>
                  </div>
                  
                  <div class="wp100 dflex">
                    <h1 class="lineh38">₹ {{row.billAmount}}</h1>
                  </div>
                </div>
                
                <div class="description pt6">
                  <div class="content-flex center-align">
                    <a class="cust-name">{{row.city}}</a>
                    <!-- <p class="type">Allow</p> -->
                  </div>
                </div>
                <div *ngIf="row.remarks" class="figure-outer mb6 mt16">
                  <div class="figure-innear dflex white-bg">
                    <div class="cs-figure">
                      <p>Remark</p>
                      <p class="black-clr">{{row.remarks}}</p>
                    </div>
                  </div>
                </div> 
              </div>
              
            </div>
          </div>
        </li>
        
        
        <li *ngIf="expenseCartObj['Local Convence'] && expenseCartObj['Local Convence'].length>0">
          <div class="collapsible-header">Local Convence - ₹ {{expenseTypeFinalTotalArr['Local Convence']}}</div>
          <div class="collapsible-body p0">
            
            <div class="list">
              <div *ngFor="let row of expenseCartObj['Local Convence']" class="box complete">
                <div class="heading">
                  <div class="order-content">
                    <p class="grey-clr">{{row.date | date: 'dd MMM yyyy'}}</p>
                  </div>
                  
                  <div class="wp100 dflex">
                    <h1 class="lineh38">₹ {{row.fare}}</h1>
                  </div>
                </div>
                
                
                <div class="cs-list mt16">
                  <div class="list-data flat-item">
                    <div class="figure padding0">
                      <ul>
                        <li>
                          <span>From</span>
                          <p>{{row.from}}</p>
                        </li>
                        <li>
                          <span>To</span>
                          <p>{{row.to}}</p>
                        </li>
                      </ul>
                      <ul *ngIf="row.remarks">
                        <li class="wp100" style="margin-top: -1px !important;">
                          <span>Mode</span>
                          <p style="white-space: normal;">{{row.modeOfTravelName}}</p>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </li>
        
        <li *ngIf="expenseCartObj['Misc Expense'] && expenseCartObj['Misc Expense'].length>0">
          <div class="collapsible-header">Misc Expense - ₹ {{expenseTypeFinalTotalArr['Misc Expense']}}</div>
          
          <div class="collapsible-body p0">
            
            <div class="list">
              <div *ngFor="let row of expenseCartObj['Misc Expense']" class="box complete">
                
                <div class="heading">
                  <div class="order-content">
                    <p class="font13r">{{row.miscActivityTypeName}}</p>
                  </div>
                  
                  <div class="wp100 dflex">
                    <h1 class="lineh38"> {{row.date | date: 'dd-MMM-yyyy'}}</h1>
                  </div>
                </div>
                
                
                <div class="figure-outer mb6 mt16">
                  <div class="figure-innear dflex white-bg">
                    <div class="cs-figure">
                      <p>Place Expense</p>
                      <p class="black-clr">{{row.placeOfExpense}}</p>
                    </div>
                    <div class="cs-figure border-left">
                      <p>Beneficiary Name</p>
                      <p class="black-clr">{{row.nameOfBeneficiary}}</p>
                    </div>
                  </div>
                  
                  <div class="figure-innear dflex white-bg">
                    <div class="cs-figure">
                      <p>Amount</p>
                      <p class="black-clr">₹ {{row.amount}}</p>
                    </div>
                    <div class="cs-figure border-left">
                      <p>Tax</p>
                      <p class="black-clr">₹ {{row.tax}}</p>
                    </div>
                  </div>
                  
                  
                  <div *ngIf="row.remarks" class="figure-innear dflex white-bg">
                    <div class="cs-figure">
                      <p>Remark</p>
                      <p class="black-clr">{{row.remarks}}</p>
                    </div>
                  </div>
                  
                </div> 
              </div>
              
            </div>
            
          </div>
        </li>
        <li class="active">
          <div class="collapsible-header">Order Summary</div>
          
          <div class="collapsible-body p0">
            <div class="list">
              <div class="sm-table">
                <table>
                  <tr>
                    <th class="text-right">Bill Amount</th>
                    <th class="text-center w20">:</th>
                    <td class="text-right w110">&#x20B9; {{finalTravelTotal}}</td>
                  </tr>
                  <tr>
                    <th class="text-right">Advance</th>
                    <th class="text-center">:</th>
                    <td class="text-right">&#x20B9; {{advanceAmount}}</td>
                  </tr>
                  <tr>
                    <th class="text-right">Claim</th>
                    <th class="text-center">:</th>
                    <td class="text-right">&#x20B9; {{claimAmount}}</td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
        </li>
      </ul>
    </form>
    
    
    <form  id="promotionSummaryStart">
        <!-- *ngIf="expenseBasicArr['expenseType']==3" -->
      <ul class="collapsible">
        <li>
          <div class="collapsible-header">
            Sales Parmotion Expense
          </div>
          <div class="collapsible-body p0">
            <div class="list mt16">
              
              <div *ngFor="let row of expenseCartObj['Sales Promotion']" class="box complete">
                
                <div class="heading">
                  <div class="order-content">
                    <p class="grey-clr">Sales Promotion</p>
                  </div>
                  
                  <div class="wp100 dflex">
                    <!-- <h1>₹ 3000</h1> -->
                  </div>
                </div>
                
                
                <div class="description pt6">
                  <div class="content-flex center-align">
                    <a class="cust-name">{{row.salesActivityTypeName}} </a>
                  </div>
                  <div class="content-flex center-align">
                    <a class="cust-name">{{row.placeOfActivity}}</a>
                  </div>
                </div>
                
                <div class="cs-list mt16">
                  <div class="list-data flat-item">
                    <div class="figure padding0">
                      <ul>
                        <li>
                          <span>No Of Attendees</span>
                          <p>{{row.noOfAttendees}}</p>
                        </li>
                        <li>
                          <span>Rental Exp.</span>
                          <p>&#x20B9; {{row.rentalExpenses}}</p>
                        </li>
                        <li>
                          <span>Food Exp.</span>
                          <p>&#x20B9; {{row.foodExpense}}</p>
                        </li>
                        <li>
                          <span>Av-Aids Exp.</span>
                          <p >&#x20B9; {{row['avAidsExpense'] ? row['avAidsExpense'] : 0}}</p>
                        </li>
                        <li>
                          <span>Gift Exp.</span>
                          <p>&#x20B9; {{row['giftsExpense'] ? row['giftsExpense'] : 0}}</p>
                        </li>
                        <li>
                          <span>	Misc Exp.</span>
                          <p>&#x20B9; {{row['miscExpense'] ? row['miscExpense'] : 0}}</p>
                        </li>
                        <li>
                          <span>Approved Amount</span>
                          <p>&#x20B9; {{row['approvedAmount'] ? row['approvedAmount'] : 0}}</p>
                        </li>
                        <li>
                          <span>Tax</span>
                          <p>&#x20B9; {{row['tax'] ? row['tax'] : 0}}</p>
                        </li>
                      </ul>
                      <ul *ngIf="row.remarks">
                        <li class="wp100" style="margin-top: -1px !important;">
                          <span>Remark</span>
                          <p style="white-space: normal;">{{row.remarks}}</p>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="sm-table">
              <table>
                <tr>
                  <th class="text-right">Total Rental Exp.</th>
                  <th class="w30 text-center">:</th>
                  <td class="w100 text-right">&#x20B9; {{rentalExpenses}}</td>
                </tr>
                <tr>
                  <th class="text-right">Total Food Exp</th>
                  <th class="text-center">:</th>
                  <td class="text-right">&#x20B9; {{foodExpense}}</td>
                </tr>
                <tr>
                  <th class="text-right">Total AV Aids Exp.</th>
                  <th class="text-center">:</th>
                  <td class="text-right">&#x20B9; {{avAidsExpense}}</td>
                </tr>
                <tr>
                  <th class="text-right">Total Gifts Exp.</th>
                  <th class="text-center">:</th>
                  <td class="text-right">&#x20B9; {{giftsExpense}}</td>
                </tr>
                <tr>
                  <th class="text-right">Total Misc Exp.	</th>
                  <th class="text-center">:</th>
                  <td class="text-right">&#x20B9; {{miscExpense}}</td>
                </tr>
                <tr>
                  <th class="text-right">Total promational Exp.</th>
                  <th class="text-center">:</th>
                  <td class="text-right">&#x20B9; {{finalTravelTotal}}</td>
                </tr>
                <tr>
                  <th class="text-right">Advance Amount</th>
                  <th class="text-center">:</th>
                  <td class="text-right">&#x20B9; {{expenseBasicArr['advanceAmount']}}</td>
                </tr>
                <tr>
                  <th class="text-right">Claim Amount</th>
                  <th class="text-center">:</th>
                  <td class="text-right">&#x20B9; {{expenseBasicArr['claimAmount']}}</td>
                </tr>
              </table>
            </div>
          </div>
        </li>
      </ul>
    </form>
    
    
    <form  id="miscSummaryStart">
      
        <!-- *ngIf="expenseBasicArr['expenseType']==4" -->
      <ul class="collapsible">
        <li>
          <div class="collapsible-header">
            Misc. Expense
          </div>
          <div class="collapsible-body p0">
            <div class="list mt16">
              <div *ngFor="let row of expenseCartObj['Misc Expense']" class="box complete">
                <div class="heading">
                  <div class="dflex" style="align-items: flex-start;">
                    <div class="wp100">
                      <p class="black-clr">{{row.nameOfBeneficiary}}</p>
                    </div>
                  </div>
                  <div class="date">{{row.date | date: 'dd-MMM-yyyy'}}</div>
                </div>
                
                <div class="cs-list mt16">
                  <div class="list-data flat-item">
                    <div class="figure padding0">
                      <ul>
                        <li>
                          <span>Amount</span>
                          <p>&#x20B9; {{row.amount}}</p>
                        </li>
                        <li>
                          <span>Tax Amount</span>
                          <p>&#x20B9; {{row.tax}}</p>
                        </li>
                        <li>
                          <span>Nature Of Exp.</span>
                          <p>&#x20B9; {{row.miscActivityType}}</p>
                        </li>
                        <li>
                          <span>Place Of Exp.</span>
                          <p>&#x20B9; {{row.placeOfExpense}}</p>
                        </li>
                      </ul>
                      <ul>
                        <li class="wp100" style="margin-top: -1px !important;">
                          <span>Remark</span>
                          <p style="white-space: normal;">{{row.remarks}}</p>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
              
            </div>
            
            <div class="sm-table">
              <table>
                <tr>
                  <th class="text-right">Total Misc Exp.</th>
                  <th class="w30 text-center">:</th>
                  <td class="w100 text-right">&#x20B9; {{finalTravelTotal}}</td>
                </tr>
                <tr>
                  <th class="text-right">Advance Amount</th>
                  <th class="text-center">:</th>
                  <td class="text-right">&#x20B9; {{expenseBasicArr['advanceAmount']}}</td>
                </tr>
                <tr>
                  <th class="text-right">Claim Amount</th>
                  <th class="text-center">:</th>
                  <td class="text-right">&#x20B9; {{expenseBasicArr['claimAmount']}}</td>
                </tr>
              </table>
            </div>
            
          </div>
        </li>
      </ul>
      
      
    </form>
    
    
    <form  id="localSummaryStart">
        <!-- *ngIf="expenseBasicArr['expenseType']==1" -->
      <ul class="collapsible">
        
        <li>
          <div class="collapsible-header">
            Local Conveyance
          </div>
          <div class="collapsible-body p0">
            <div class="list">
              <div *ngFor="let row of expenseCartObj['Local Expense']" class="box complete">
                <div class="heading">
                  <div class="order-content">
                    <p class="grey-clr"></p>
                  </div>
                  
                  <div class="wp100 dflex">
                    <h1>₹ {{row.itemFinalAmount}}</h1>
                  </div>
                </div>
                
                <div class="description pt6">
                  <div class="content-flex center-align">
                    <a class="cust-name f14">{{row.from}} To {{row.to}}</a>
                  </div>
                </div>
                
                <div class="cs-list mt16">
                  <div class="list-data flat-item">
                    <div class="figure padding0">
                      <ul>
                        <li>
                          <span>Type Of Mode</span>
                          <p>{{row.modeTypeName}}</p>
                        </li>
                        <li>
                          <span>Mode Of Travel</span>
                          <p>{{row.modeName}}</p>
                        </li>
                        <li>
                          <span>Vechicle No</span>
                          <p>{{row.vehicleNumber}}</p>
                        </li>
                        <li>
                          <span>KMS Covered</span>
                          <p>{{row.distanceKMS}} km</p>
                        </li>
                        <li>
                          <span>Amount</span>
                          <p>&#x20B9; {{row.amount}}</p>
                        </li>
                        <li>
                          <span>Other Exp.</span>
                          <p>&#x20B9; {{row.otherExpense ? row.otherExpense : 0}}</p>
                        </li>
                      </ul>
                      <ul *ngIf="row.remarks">
                        <li class="wp100" style="margin-top: -1px !important;">
                          <span>Remark</span>
                          <p style="white-space: normal;">{{row.remarks}}</p>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
                
                
                
              </div>
              
            </div>
            
            <div class="sm-table">
              <table>
                <tr>
                  <th class="text-right">Local Travel Expense.</th>
                  <th class="w30 text-center">:</th>
                  <td class="w100 text-right">&#x20B9; {{basicTravelTotal}}</td>
                </tr>
                <tr>
                  <th class="text-right">Other Type Expense</th>
                  <th class="text-center">:</th>
                  <td class="text-right">&#x20B9; {{otherExpense}}</td>
                </tr>
                
                <tr>
                  <th class="text-right">Tax</th>
                  <th class="text-center">:</th>
                  <td class="text-right">&#x20B9; {{taxTotal}}</td>
                </tr>
                
                <tr>
                  <th class="text-right">Total</th>
                  <th class="text-center">:</th>
                  <td class="text-right">&#x20B9; {{finalTravelTotal}}</td>
                </tr>
              </table>
            </div>
          </div>
        </li>
      </ul>
    </form>
    
    
    <div class="cs-file-multiple mt15">
      <ul>
        <li [hidden]="val.del==1" *ngFor="let val of db_img_arr; let i = index">
          <label>
            <img src="assets/imgs/4.jpg">
            <a  (click)="remove_db_image(i)" class="close"><i class="material-icons">delete_sweep</i></a>
          </label>
        </li>
        
        <li *ngFor="let val of img_arr; let i = index"> 
          <label>
            <img [src]="getSecurityTrusted(val.image)" alt="">
            <a (click)="remove_image(i)" class="close"><i class="material-icons">delete_sweep</i></a>
          </label>
        </li>
        
        <li>
          <div (click)="openActionSheet()" class="cs-file wp100">
            <label>
              <input style="display:none;">
              <i class="material-icons add-file-icon" >add</i>
            </label>
          </div>
        </li>
      </ul>
    </div>
    
    
    
  </div>
</ion-content>


<ion-footer padding>
  <div class="cs-btn border-none text-center dflex">
    <button class="wp100" ion-button color="secondary" round>Save As draft</button>
    <button class="wp100" (click)="onSaveExpenseHandler()" ion-button color="secondary" round>Final Submit</button>
  </div>
</ion-footer>